{"version":3,"sources":["../../lib/twentyei.js"],"names":["db","bot","music","gif","insults","botName","process","chat","message","query","body","toLowerCase","slice","indexOf","cmd","action","length","console","log","isEligible","threadID","getUserID","err","data","sendMessage","addUserToGroup","userID","removeUserFromGroup","spotify","changeThreadEmoji","search","setTitle","generate","ask","then","response"],"mappings":"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","file":"twentyei.js","sourcesContent":["/**\n * Created by sanil on 11/19/17.\n */\n\nimport * as db from './db-functions';\nimport * as bot from './cleverbot';\nimport * as music from './music';\nimport * as gif from './giphy'\nimport * as insults from './insults';\n\nexport const botName = '@Twentyei Chawla';\n\nexport const process = async (chat, message) => {\n    let query = message.body.toLowerCase().slice(message.body.indexOf(botName) + 17);\n    let cmd = (query.indexOf(\" \") >= 0) ? query.slice(0, query.indexOf(\" \")) : query;\n    let action = query.slice(query.indexOf(cmd) + cmd.length + 1);\n\n    console.log(\"Message received!\");\n    console.log(\"Query: \" + query);\n    console.log(\"Command: \" + cmd);\n    console.log(\"Action: \" + action);\n\n    if (await db.isEligible(cmd, message.threadID)) {\n        switch (cmd) {\n            case 'add':\n                chat.getUserID(action, (err, data) => {\n                    if (err) chat.sendMessage(\"There was an error: \" + err, message.threadID);\n                    else chat.addUserToGroup(data[0].userID, message.threadID);\n                });\n                break;\n            case 'kick':\n                chat.getUserID(action, (err, data) => {\n                    if (err) chat.sendMessage(\"There was an error: \" + err, message.threadID);\n                    else chat.removeUserFromGroup(data[0].userID, message.threadID);\n                });\n                break;\n            case 'spotify':\n                chat.sendMessage(await music.spotify(action), message.threadID);\n                break;\n            case 'emoji':\n                chat.changeThreadEmoji(action, message.threadID, (err) => {\n                    if (err) chat.sendMessage(\"There was an error: \" + err, message.threadID);\n                });\n                break;\n            case 'color':\n                chat.sendMessage(\"Changing the thread color isn't supported at this time. Sorry!\", message.threadID);\n                break;\n            case 'giphy':\n                chat.sendMessage(await gif.search(action), message.threadID);\n                break;\n            case 'title':\n                chat.setTitle(action, message.threadID);\n                break;\n            case 'roast':\n                chat.sendMessage(insults.generate(), message.threadID);\n                break;\n            case 'pup':\n                chat.sendMessage(await gif.search(\"cute puppy\"), message.threadID);\n                break;\n            default:\n                return 'Error';\n        }\n    } else {\n        bot.ask(query, message.threadID)\n            .then((response) => {\n                chat.sendMessage(response, message.threadID);\n            });\n    }\n};\n"]}